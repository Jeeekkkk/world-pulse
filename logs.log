2025-05-06 17:56:35,214 [INFO] Scheduler started... target time is 07:58
2025-05-06 17:56:35,214 [DEBUG] Scheduled jobs: [Every 2 minutes do send_news_update() (last run: [never], next run: 2025-05-06 17:58:35)]
2025-05-06 17:57:05,216 [DEBUG] Checking schedule at 00:57:05
2025-05-06 17:57:35,218 [DEBUG] Checking schedule at 00:57:35
2025-05-06 17:58:05,219 [DEBUG] Checking schedule at 00:58:05
2025-05-06 17:58:35,221 [DEBUG] Checking schedule at 00:58:35
2025-05-06 17:58:35,221 [DEBUG] Running job Job(interval=2, unit=minutes, do=send_news_update, args=(), kwargs={})
2025-05-06 17:58:35,221 [INFO] Running scheduled job: sending news summary...
2025-05-06 17:58:35,231 [DEBUG] Starting new HTTPS connection (1): newsapi.org:443
2025-05-06 17:58:35,651 [DEBUG] https://newsapi.org:443 "GET /v2/top-headlines?language=en&pageSize=50&sources=associated-press%2Cnpr%2Creuters%2Cpolitico%2Cbbc-news HTTP/1.1" 200 None
2025-05-06 17:58:35,667 [DEBUG] Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-5f370280-4747-4f3c-99e7-e7dabbf9d218', 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful and unbiased news summarizer.'}, {'role': 'user', 'content': "You are a helpful and unbiased news summarizer. Today is May 07, 2025.\nDo not invent facts or add outside context. Only summarize what is in the list of headlines below.\n\nSelect the 5 most important U.S. news stories and 5 most important international news stories.\n\nFormat your response exactly like this:\n**U.S. News:**\n1. *[Source] Title* � One-sentence summary.\n...\n\n**International News:**\n1. *[Source] Title* � One-sentence summary.\n...\n\nHere is the list of headlines:\n\n- [BBC News] Israel cabinet approves plan to 'capture' Gaza - official\n- [BBC News] The people refusing to use AI"}], 'model': 'gpt-4o-2024-08-06', 'max_tokens': 600, 'temperature': 0.3}}
2025-05-06 17:58:35,709 [DEBUG] Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-05-06 17:58:35,709 [DEBUG] connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-05-06 17:58:35,789 [DEBUG] connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000207DCB75450>
2025-05-06 17:58:35,789 [DEBUG] start_tls.started ssl_context=<ssl.SSLContext object at 0x00000207DCA971D0> server_hostname='api.openai.com' timeout=5.0
2025-05-06 17:58:35,857 [DEBUG] start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000207DCB75510>
2025-05-06 17:58:35,857 [DEBUG] send_request_headers.started request=<Request [b'POST']>
2025-05-06 17:58:35,865 [DEBUG] send_request_headers.complete
2025-05-06 17:58:35,865 [DEBUG] send_request_body.started request=<Request [b'POST']>
2025-05-06 17:58:35,865 [DEBUG] send_request_body.complete
2025-05-06 17:58:35,865 [DEBUG] receive_response_headers.started request=<Request [b'POST']>
2025-05-06 17:58:37,670 [DEBUG] receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 07 May 2025 00:58:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'user-mowa1pt8jnuqhljmqo6hjngo'), (b'openai-processing-ms', b'1564'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'500'), (b'x-ratelimit-limit-tokens', b'30000'), (b'x-ratelimit-remaining-requests', b'499'), (b'x-ratelimit-remaining-tokens', b'29837'), (b'x-ratelimit-reset-requests', b'120ms'), (b'x-ratelimit-reset-tokens', b'326ms'), (b'x-request-id', b'req_459ed665b0c875dbc263806ac6981640'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=xcqlf7o3grOHrRkvBIiy3KDdMrvIGLNxvJo.glLtMXI-1746579517-1.0.1.1-U63.16bW2f8.Pqa7efv85PxpeUX8L48vPcUxACyCFMxh9Jb0ZtcZWRELOcnQ1g8Oy6IIHAVoOy4J9XU6P0iz629UoXqGbb9KlLNh4vO1vjw; path=/; expires=Wed, 07-May-25 01:28:37 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=3zCX2PWBn2KjvSnO1QIrXtEcAscrIhEgLMUc0ebfvQA-1746579517254-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'93bcc5140eef08ea-LAX'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-05-06 17:58:37,670 [INFO] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-06 17:58:37,670 [DEBUG] receive_response_body.started request=<Request [b'POST']>
2025-05-06 17:58:37,686 [DEBUG] receive_response_body.complete
2025-05-06 17:58:37,686 [DEBUG] response_closed.started
2025-05-06 17:58:37,686 [DEBUG] response_closed.complete
2025-05-06 17:58:37,686 [DEBUG] HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Wed, 07 May 2025 00:58:37 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'user-mowa1pt8jnuqhljmqo6hjngo'), ('openai-processing-ms', '1564'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '500'), ('x-ratelimit-limit-tokens', '30000'), ('x-ratelimit-remaining-requests', '499'), ('x-ratelimit-remaining-tokens', '29837'), ('x-ratelimit-reset-requests', '120ms'), ('x-ratelimit-reset-tokens', '326ms'), ('x-request-id', 'req_459ed665b0c875dbc263806ac6981640'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=xcqlf7o3grOHrRkvBIiy3KDdMrvIGLNxvJo.glLtMXI-1746579517-1.0.1.1-U63.16bW2f8.Pqa7efv85PxpeUX8L48vPcUxACyCFMxh9Jb0ZtcZWRELOcnQ1g8Oy6IIHAVoOy4J9XU6P0iz629UoXqGbb9KlLNh4vO1vjw; path=/; expires=Wed, 07-May-25 01:28:37 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=3zCX2PWBn2KjvSnO1QIrXtEcAscrIhEgLMUc0ebfvQA-1746579517254-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '93bcc5140eef08ea-LAX'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-05-06 17:58:37,686 [DEBUG] request_id: req_459ed665b0c875dbc263806ac6981640
2025-05-06 17:58:37,702 [DEBUG] Sending a request - url: https://slack.com/api/chat.postMessage, query_params: {}, body_params: {}, files: {}, json_body: {'channel': '#world-pulse', 'text': "*Daily News Summary:*\n\n**U.S. News:**\n\n1. *[No U.S. headlines available]*\n\n**International News:**\n\n1. *[BBC News] Israel cabinet approves plan to 'capture' Gaza - official* � The Israeli cabinet has officially approved a plan to take control of Gaza, according to an unnamed official.\n2. *[BBC News] The people refusing to use AI* � A report highlights individuals and groups who are choosing not to adopt artificial intelligence technologies in their personal and professional lives."}, headers: {'Content-Type': 'application/json;charset=utf-8', 'Authorization': '(redacted)', 'User-Agent': 'Python/3.11.0 slackclient/3.35.0 Windows/10'}
2025-05-06 17:58:38,152 [DEBUG] Received the following response - status: 200, headers: {'date': 'Wed, 07 May 2025 00:58:37 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': '4f49c64b45fc6d7ec296dfccbe63e3f2', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-accepted-oauth-scopes': 'chat:write', 'x-oauth-scopes': 'app_mentions:read,channels:history,channels:join,channels:manage,channels:read,chat:write.customize,chat:write.public,chat:write,files:read,files:write,groups:history,groups:read,groups:write,im:history,im:read,im:write,links:read,links:write,mpim:history,mpim:read,mpim:write,pins:read,pins:write,reactions:read,reactions:write,reminders:read,reminders:write,team:read,usergroups:read,usergroups:write,users:read,users:write,users.profile:read', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'aBqwPURc8B_Ao_qONCE2HwAAEA4', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '2033', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-rcadywik,envoy-edge-pdx-thcfpsdh', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '173', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-sxla', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}, body: {"ok":true,"channel":"C08R2RRGSRH","ts":"1746579517.694289","message":{"user":"U08RNJCAK32","type":"message","ts":"1746579517.694289","bot_id":"B08RNJC8AJU","app_id":"A08RBKEV2GZ","text":"*Daily News Summary:*\n\n**U.S. News:**\n\n1. *[No U.S. headlines available]*\n\n**International News:**\n\n1. *[BBC News] Israel cabinet approves plan to 'capture' Gaza - official* \u2014 The Israeli cabinet has officially approved a plan to take control of Gaza, according to an unnamed official.\n2. *[BBC News] The people refusing to use AI* \u2014 A report highlights individuals and groups who are choosing not to adopt artificial intelligence technologies in their personal and professional lives.","team":"T03T9ESMS3Z","bot_profile":{"id":"B08RNJC8AJU","app_id":"A08RBKEV2GZ","user_id":"U08RNJCAK32","name":"world-pulse-project","icons":{"image_36":"https:\/\/a.slack-edge.com\/80588\/img\/plugins\/app\/bot_36.png","image_48":"https:\/\/a.slack-edge.com\/80588\/img\/plugins\/app\/bot_48.png","image_72":"https:\/\/a.slack-edge.com\/80588\/img\/plugins\/app\/service_72.png"},"deleted":false,"updated":1746473953,"team_id":"T03T9ESMS3Z"},"blocks":[{"type":"rich_text","block_id":"nMWH","elements":[{"type":"rich_text_section","elements":[{"type":"text","text":"Daily News Summary:","style":{"bold":true}},{"type":"text","text":"\n\n**U.S. News:**\n\n1. "},{"type":"text","text":"[No U.S. headlines available]","style":{"bold":true}},{"type":"text","text":"\n\n**International News:**\n\n1. "},{"type":"text","text":"[BBC News] Israel cabinet approves plan to 'capture' Gaza - official","style":{"bold":true}},{"type":"text","text":" \u2014 The Israeli cabinet has officially approved a plan to take control of Gaza, according to an unnamed official.\n2. "},{"type":"text","text":"[BBC News] The people refusing to use AI","style":{"bold":true}},{"type":"text","text":" \u2014 A report highlights individuals and groups who are choosing not to adopt artificial intelligence technologies in their personal and professional lives."}]}]}]}}
2025-05-06 17:58:38,168 [INFO] Successfully sent message
2025-05-06 17:58:38,168 [INFO] Successfully posted news summary to Slack.
2025-05-06 17:59:08,172 [DEBUG] Checking schedule at 00:59:08
2025-05-06 17:59:38,173 [DEBUG] Checking schedule at 00:59:38
2025-05-06 17:59:40,610 [DEBUG] close.started
2025-05-06 17:59:40,610 [DEBUG] close.complete
2025-05-06 18:08:54,027 [INFO] Scheduler started... target time is 15:00
2025-05-06 18:08:54,027 [DEBUG] Scheduled jobs: [Every 1 day at 15:00:00 do send_news_update() (last run: [never], next run: 2025-05-07 15:00:00)]
2025-05-06 18:09:24,042 [DEBUG] Checking schedule at 01:09:24
2025-05-06 18:09:54,043 [DEBUG] Checking schedule at 01:09:54
2025-05-06 18:10:24,045 [DEBUG] Checking schedule at 01:10:24
2025-05-06 18:10:54,046 [DEBUG] Checking schedule at 01:10:54
2025-05-06 18:11:24,048 [DEBUG] Checking schedule at 01:11:24
2025-05-06 18:11:54,049 [DEBUG] Checking schedule at 01:11:54
2025-05-06 18:12:24,050 [DEBUG] Checking schedule at 01:12:24
2025-05-06 18:12:54,052 [DEBUG] Checking schedule at 01:12:54
